% hse-cheatsheets.sty — Base macros and styling helpers for cheatsheets
% Project: HSE AMI Cheatsheets
% Author: werserk
% Version: 0.1

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{hse-cheatsheets}[2025/09/07 v0.1 HSE cheatsheets base]

% Core packages (kept lightweight; do not force geometry/babel in case user manages them)
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{mathtools}
\RequirePackage{graphicx}
\RequirePackage{xcolor}
\RequirePackage{booktabs}
\RequirePackage{array}
\RequirePackage{enumitem}
\RequirePackage{multicol}
\RequirePackage{titlesec}
\RequirePackage{hyperref}
\RequirePackage{xparse}

% Default accent color (can be overridden by calling \HSESetAccent{<HTML>})
\definecolor{accent}{HTML}{FF7517}

% Expose a simple API to set accent color and link colors
\NewDocumentCommand{\HSESetAccent}{m}{%
  \definecolor{accent}{HTML}{#1}%
  \hypersetup{colorlinks=true, linkcolor=accent, urlcolor=accent, citecolor=accent}%
}

% Initialize link colors using default accent
\hypersetup{colorlinks=true, linkcolor=accent, urlcolor=accent, citecolor=accent}

% Math operators commonly used
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\divergence}{div}
\DeclareMathOperator{\curl}{curl}
\DeclareMathOperator{\laplacian}{\Delta}

% Title helpers
% Usage: \HSETitle{Main Title}{Subtitle}
\NewDocumentCommand{\HSETitle}{m m}{%
  \begin{center}
    {\Huge\bfseries #1}\\[0.5cm]
    {\large #2}\\[0.3cm]
    \vspace{0.3cm}
    \rule{\textwidth}{1pt}
  \end{center}%
}

% Contributors helpers
% Define \contributors beforehand (semicolon-separated) or leave empty
\providecommand{\contributors}{}
\NewDocumentCommand{\HSEContributorsDisplay}{}{% show --- if empty
  \if\relax\detokenize{\contributors}\relax
    ---
  \else
    \texttt{\contributors}
  \fi
}

% Footer helper: left brand link, right contributors
% Usage: \HSEFooter  (assumes accent color)
\NewDocumentCommand{\HSEFooter}{}{
  {\noindent \href{https://werserk.com}{\textcolor{accent}{\textbf{by werserk}}} \hfill contributors: \HSEContributorsDisplay}
}

% Two-columns helpers (thin wrappers for clarity)
\NewDocumentCommand{\HSETwoColsBegin}{}{%
  \begin{multicols}{2}
}
\NewDocumentCommand{\HSETwoColsEnd}{}{%
  \end{multicols}
}

% Section title defaults (non-colored; users can override in document)
\titleformat{\section}{\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\large\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalsize\bfseries}{\thesubsubsection}{1em}{}

% List defaults for compactness
\setlist[itemize]{leftmargin=*,noitemsep,topsep=0pt}
\setlist[enumerate]{leftmargin=*,noitemsep,topsep=0pt}


% --- Unified content blocks and helpers ---
% Generic titled box centered with adjustable width
% Usage: \HSEBox[0.92\textwidth]{Title}{content}
\NewDocumentCommand{\HSEBox}{O{0.92\textwidth} m m}{%
  \begin{center}
    \fbox{\parbox{#1}{\textbf{#2}\par #3}}
  \end{center}%
}

% Specialized boxes
\NewDocumentCommand{\HSETldr}{m}{\HSEBox{TL;DR}{#1}}
\NewDocumentCommand{\HSEExample}{m}{\HSEBox{Пример}{#1}}
\NewDocumentCommand{\HSEAlgorithm}{m}{\HSEBox{Алгоритм}{#1}}
\NewDocumentCommand{\HSEDefinition}{m}{\HSEBox{Определение}{#1}}
\NewDocumentCommand{\HSENote}{m}{\HSEBox{Замечание}{#1}}

% Steps list with Russian labels: Шаг 1., Шаг 2., ...
% Optional enumitem options can be passed: \begin{HSESteps}[resume]
\NewDocumentEnvironment{HSESteps}{ O{} }{%
  \begin{enumerate}[label=\textbf{Шаг~\arabic*:}, #1]
}{\end{enumerate}}

% Inline term highlighter for first-use definitions
\NewDocumentCommand{\Term}{m}{\textbf{#1}}

